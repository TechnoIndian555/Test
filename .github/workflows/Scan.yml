name: 256 JOBS

on:
  workflow_dispatch:

jobs:
  generate-matrix:
    runs-on: ubuntu-latest
    outputs:
      matrix: ${{ steps.set-matrix.outputs.matrix }}
    steps:
      - id: set-matrix
        run: |
          echo "matrix={\"id\":[\"$(seq -s',' 1 256)\"}]}" >> $GITHUB_OUTPUT

  boom:
    needs: generate-matrix
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 256
      matrix:
        id: ${{ fromJSON(needs.generate-matrix.outputs.matrix).id }}
    steps:
      - name: "MAIN HU ID ${{ matrix.id }}"
        run: |
          echo "Job #${{ matrix.id }} START → $(date +%S.%3N)"
          sleep 3
          echo "Job #${{ matrix.id }} DONE  → $(date +%S.%3N)"
